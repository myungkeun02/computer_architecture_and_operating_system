# 다양한 입출력 방법
입출력 작업을 수행하려면 CPU와 장치 컨트롤러가 정보를 주고받아야하는데
주고받는 방법은 크게 세가지가 있다.

### 1. 프로그램 입출력
    프로그램 속 명령어로 입출력장치를 제어하는 방법.
    장치 컨트롤러 내부의 세가지 레지스터를 통해 명령어를 받고, 입출력장치의 상태를
    확인한뒤, 데이터를 전달한다.

    하지만 장치컨트롤러의 레지스터의 위치를 CPU가 모두 알고 있기는 어렵다.
    그래서 두가지 방식으로 레지스터의 위치를 파악한다.
    
    1. 메모리 맵 입출력
    메모리에 접근하기 위한 주소 공간과 입출력장치에 접근하기 위한 주소공간을
    하나의 주소 공간으로 간주하는 입출력 방식이다.
    가령 1024개의 주소를 표현할 수 있는 컴퓨터가 있다면, 512개는 메모리 주소를
    512개는 장치 컨트롤러의 레지스터를 표현하기 위해 사용하는 것이다.

    2. 고립형 입출력
    메모리를 위한 주소공간과 입출력장치를 위한 주소공간을 분리하는 방식이다.
    제어버스를 메모리용, 입출력장치용 두가지로 나누어 명령어가 이동한다.

    이때 입출력장치 명령어는 제어버스에서 구분을 하기 위해 입출력 명령어를 사용한다.
    메모리에 접근하는 명령어와 입출력 장치에 접근하는 명령어가 굳이 다를 필요 없던
    메모리 맵 입출력과 대조된다.

### 2. 인터럽트 기반 입출력
    인터럽트를 기반으로 하는 입출력으로 인터럽트의 처리 순서를 따라 제어된다.
    
    만약 여러개의 입출력장치가 인터럽트를 한번에 보낸다면, 컴퓨터는
    프로그래머블 인터럽트 컨트롤러를 통해 우선순위를 산정하여 차례대로
    인터럽트를 처리한다.

### 3. DMA 입출력
    프로그램 입출력 방식과, 인터럽트 기반 입출력 방식의 최대 단점은
    입출력 장치와 메모리 사이에 전송되는 데이터가 항상 CPU를 거쳐야 한다는 것이다.
    이를 보완하기 위해 직접 메모리에 접근할 수 있는 입출력 방식이 DMA 입출력이다.

    DMA 입출력을 위해서는 시스템 버스에 DMA 컨트롤러 라는 하드웨어가 필요하다.
    방식은 다음과 같다.

    1. CPU는 DMA 컨트롤러에게 입출력장치의 주소, 수행할 연산, 읽거나 쓸 메모리 주소
    등 과 같은 정보로 입출력 작업을 명령한다.
    2. DMA 컨트롤러는 CPU 대신 장치 컨트롤러와 상호작용하며 입출력 작업을 수행한다.
    이떄 DMA 컨트롤러는 필요한 경우 메모리에 직접 접근하여 정보를 읽거나 쓴다.
    3. 입출력 작업이 끝나면 DMA 컨트롤러는 CPU에 인터럽트를 걸어 작업이 끝났음을 알린다

    위 입출력 과정 처럼 주고받을 데이터가 CPU를 거치지 않기 때문에 작업 부담이 준다.

    DMA를 장치컨트롤러와 연결을 할 때 보통 입출력 버스라는 별도의 버스를 이용한다.
    시스템 버스를 이용하면 입출력 과정중에 CPU가 시스템 버스를 이용할 수 없기 떄문이다.

    입출력 버스에는 PCI, PCIe 등이 있다.
    거의 모든 입출력 장치들은 이렇게 입출력 버스와 연결된 통로를 통해 시스템 버스를 타고 CPU와 정보를 주고받는다.

